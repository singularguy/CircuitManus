<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CircuitManus Pro - 智能交互终端 (V1.0.0 Sci-Fi Enhanced)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&family=Orbitron:wght@400;500;700;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <!-- 更具科幻感的动态背景层 -->
    <div class="dynamic-background">
        <div class="stars"></div>
        <div class="twinkling"></div>
        <div class="clouds"></div>
        <div class="grid-overlay"></div>
    </div>


    <!-- ==================================================================== -->
    <!-- == START: Enhanced 3D Sci-Fi Tech Component (IDT Tech Component) HTML == -->
    <!-- ==================================================================== -->
    <div id="idtTechComponentWrapper" class="component-wrapper is-visible">
        <div class="scene">
            <!-- 核心立方体 -->
            <div class="core-cube">
                <div class="face front">
                    <div class="circuit-pattern">
                        <span></span><span></span><span></span>
                    </div>
                    <div class="face-glow-overlay"></div>
                    <div class="core-label">CORE</div>
                </div>
                <div class="face back">
                    <div class="circuit-pattern alt">
                        <span></span><span></span>
                    </div>
                    <div class="face-glow-overlay"></div>
                    <div class="core-label">V.8.3</div>
                </div>
                <div class="face left">
                    <div class="circuit-pattern vertical">
                        <span></span><span></span>
                    </div>
                    <div class="face-glow-overlay"></div>
                    <div class="core-label">AI</div>
                </div>
                <div class="face right">
                    <div class="circuit-pattern vertical alt">
                        <span></span><span></span>
                    </div>
                    <div class="face-glow-overlay"></div>
                    <div class="core-label">SYS</div>
                </div>
                <div class="face top">
                    <div class="circuit-pattern horizontal">
                        <span></span><span></span>
                    </div>
                    <div class="face-glow-overlay"></div>
                    <div class="core-label">IDT</div>
                </div>
                <div class="face bottom">
                    <div class="circuit-pattern horizontal alt">
                        <span></span><span></span>
                    </div>
                    <div class="face-glow-overlay"></div>
                    <div class="core-label">RDY</div>
                </div>
            </div>

            <!-- 环绕节点 -->
            <div class="node node1">
                <div class="node-core"></div>
                <div class="node-glow-ring"></div>
            </div>
            <div class="node node2">
                <div class="node-core"></div>
                <div class="node-glow-ring"></div>
            </div>
            <div class="node node3">
                <div class="node-core"></div>
                <div class="node-glow-ring"></div>
            </div>
            <div class="node node4">
                <div class="node-core"></div>
                <div class="node-glow-ring"></div>
            </div>
            <div class="node node5">
                <div class="node-core"></div>
                <div class="node-glow-ring"></div>
            </div>
            <div class="node node6">
                <div class="node-core"></div>
                <div class="node-glow-ring"></div>
            </div>

            <!-- 装饰性连接线 (能量流) -->
            <div class="connection-line line1"></div>
            <div class="connection-line line2"></div>
            <div class="connection-line line3"></div>
            <div class="connection-line line4"></div>
            <div class="connection-line line5"></div>
            <div class="connection-line line6"></div>

            <!-- 新增：背景星云/粒子效果 (可选，但能极大增强氛围) -->
            <div class="star-particles">
                <div class="particle p1"></div>
                <div class="particle p2"></div>
                <div class="particle p3"></div>
                <div class="particle p4"></div>
                <div class="particle p5"></div>
                <div class="particle p6"></div>
                <div class="particle p7"></div>
                <div class="particle p8"></div>
                <div class="particle p9"></div>
                <div class="particle p10"></div>
                <div class="particle p11"></div>
                <div class="particle p12"></div>
                <div class="particle p13"></div>
                <div class="particle p14"></div>
                <div class="particle p15"></div>
            </div>
        </div>
    </div>
    <!-- ================================================================== -->
    <!-- == END: Enhanced 3D Sci-Fi Tech Component (IDT Tech Component) HTML == -->
    <!-- ================================================================== -->


    <div class="loader-container" id="loader">
        <div class="loader-core">
            <div class="loader-orbital orbital1"></div>
            <div class="loader-orbital orbital2"></div>
            <div class="loader-orbital orbital3"></div>
            <div class="loader-center-glow"></div>
        </div>
        <div class="loader-logo-text">
            <span>CIRCUIT</span>MANUS
        </div>
        <p class="loading-text">SYNCHRONIZING QUANTUM CORE (V1.0.0 Sci-Fi)...</p>
    </div>

    <div class="main-container" id="main-container">
        <header class="header glass-effect" id="app-header">
            <div class="logo">
                <div class="logo-icon"><i class="fas fa-atom fa-spin-pulse"></i></div>
                <h1>CircuitManus <span class="version-pro">Hyperion <span class="version-number">v1.0.0</span></span>
                </h1>
            </div>
            <div class="header-buttons">
                <button id="toggleIdtComponentBtn" class="header-btn icon-btn" title="切换AI核心视效">
                    <i class="fas fa-cubes"></i> <!-- 更换为方块图标 -->
                </button>
                <button id="theme-toggle" class="header-btn icon-btn" title="切换光影模式">
                    <i class="fas fa-adjust"></i> <!-- 更换为调节图标 -->
                </button>
                <button id="clear-chat" class="header-btn icon-btn" title="清除当前信道">
                    <i class="fas fa-ghost"></i>
                </button>
                <button id="toggle-process-log-visibility" class="header-btn icon-btn" title="切换数据流监视器">
                    <i class="fas fa-network-wired"></i>
                </button>
                <button id="manage-sessions-toggle" class="header-btn icon-btn" title="时空锚点管理 / 折叠导航">
                    <i class="fas fa-stream"></i>
                </button>
            </div>
        </header>

        <div class="chat-container">
            <aside class="sidebar glass-effect" id="sidebar">
                <div class="sidebar-content-wrapper">
                    <div class="sidebar-main-actions">
                        <button class="sidebar-button active" data-mode="chat" title="主控接口">
                            <i class="fas fa-comments-dollar"></i>
                            <span>主控接口</span>
                        </button>
                        <button class="sidebar-button" data-mode="code" title="编码矩阵 (概念)">
                            <i class="fas fa-laptop-code"></i> <!-- 替换为 fa-laptop-code -->
                            <span>编码矩阵</span>
                        </button>
                        <button class="sidebar-button" data-mode="circuit" title="逻辑中枢">
                            <i class="fas fa-microchip"></i> <!-- 替换为 fa-microchip -->
                            <span>逻辑中枢</span>
                        </button>
                        <button class="sidebar-button" data-mode="settings" title="系统调校">
                            <i class="fas fa-user-astronaut"></i>
                            <span>参数调校</span>
                        </button>
                    </div>

                    <div class="session-manager" id="session-manager">
                        <div class="session-manager-header" id="session-manager-toggle">
                            <span><i class="fas fa-timeline"></i> 时空锚点</span> <!-- 替换为 fa-timeline -->
                            <i class="fas fa-angle-double-down toggle-icon"></i>
                        </div>
                        <div class="session-list-container" id="session-list-container">
                            <ul class="session-list" id="session-list">
                                <!-- Session list items will be populated here -->
                            </ul>
                        </div>
                        <button id="create-new-session" class="primary-btn" title="开辟新时空流">
                            <i class="fas fa-wand-magic-sparkles"></i>
                            <span>开辟新流</span>
                        </button>
                    </div>
                </div>
            </aside>

            <main class="chat-area" id="chat-area">
                <div class="chat-area-content glass-effect">
                    <div class="chat-header" id="chat-header">
                        <h2 id="current-session-name">默认时空流</h2>
                        <button id="edit-session-name-btn" class="icon-btn" title="重定义此流名称"><i
                                class="fas fa-signature"></i></button>
                    </div>

                    <div class="process-log-container glass-effect" id="process-log-container" style="display: none;">
                        <div class="process-log-header">
                            <span><i class="fas fa-wave-square"></i> Agent 数据流监视器</span>
                            <button class="icon-btn" id="toggle-process-log-collapse" title="折叠/展开数据流"><i
                                    class="fas fa-chevron-up"></i></button>
                        </div>
                        <div class="process-log-content" id="process-log-content">
                            <!-- Log items will be populated here -->
                        </div>
                    </div>


                    <div class="chat-box" id="chat-box">
                        <!-- Welcome message will be appended by JS -->
                    </div>

                    <div class="file-preview glass-effect" id="file-preview">
                        <div class="file-preview-header">
                            <h3><i class="fas fa-file-import"></i> 数据晶体待上传 (概念演示)</h3>
                            <button id="close-preview" class="icon-btn" title="关闭数据舱"><i
                                    class="fas fa-times-circle"></i></button> <!-- 替换为 fa-times-circle -->
                        </div>
                        <div class="file-preview-content" id="file-preview-content">
                            <!-- File preview items will be populated here -->
                        </div>
                    </div>

                    <div class="input-area glass-effect" id="input-area">
                        <button id="attach-button" class="input-action-btn icon-btn" title="链接外部数据晶体 (概念)">
                            <i class="fas fa-paperclip"></i>
                        </button>
                        <div class="input-wrapper">
                            <textarea id="user-input" placeholder="向 Hyperion 核心发送指令... (Shift+Enter 换行)"
                                rows="1"></textarea>
                            <div class="input-actions-overlay">
                                <button id="mic-button" class="overlay-btn icon-btn" title="声波指令输入 (开发中)">
                                    <i class="fas fa-microphone-lines"></i>
                                </button>
                                <span id="char-counter" class="char-counter">0/8000</span>
                            </div>
                        </div>
                        <button id="send-button" class="send-button icon-btn" title="传输指令">
                            <svg viewBox="0 0 24 24" fill="currentColor" class="send-icon">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
                            </svg>
                            <i class="fas fa-atom fa-spin send-loading-icon" style="display: none;"></i>
                        </button>
                        <input type="file" id="file-input" multiple style="display: none">
                    </div>
                </div>
            </main>
        </div>
    </div>

    <div class="toast-container" id="toast-container"></div>

    <div class="modal" id="settings-modal">
        <div class="modal-content animate__animated glass-effect">
            <div class="modal-header">
                <h2><i class="fas fa-sliders"></i> 个性化参数矩阵</h2> <!-- 替换为 fa-sliders -->
                <button id="close-settings" class="icon-btn" title="关闭调校面板"><i
                        class="fas fa-times-circle"></i></button> <!-- 替换为 fa-times-circle -->
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <h3><i class="fas fa-palette"></i> 视觉协议</h3> <!-- 替换为 fa-palette -->
                    <div class="setting-item">
                        <label for="theme-select">光影模式</label>
                        <select id="theme-select">
                            <option value="light">晨曦矩阵 (亮色)</option>
                            <option value="dark">深空暗域 (暗色)</option>
                            <option value="auto">环境自适应</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="font-size">信息流字号</label>
                        <input type="range" id="font-size" min="12" max="20" value="16" step="1">
                        <span id="font-size-value">16px</span>
                    </div>
                    <div class="setting-item">
                        <label for="animation-level">动态视觉等级</label>
                        <select id="animation-level">
                            <option value="full">超流畅</option>
                            <option value="basic">标准</option>
                            <option value="none">极简</option>
                        </select>
                    </div>
                </div>
                <div class="setting-group">
                    <h3><i class="fas fa-comments"></i> 交互协议</h3> <!-- 替换为 fa-comments -->
                    <div class="setting-item">
                        <label for="auto-scroll">信息流自动导航</label>
                        <label class="switch"><input type="checkbox" id="auto-scroll" checked><span
                                class="slider round"></span></label>
                    </div>
                    <div class="setting-item">
                        <label for="sound-enabled">音频反馈单元 (待激活)</label>
                        <label class="switch"><input type="checkbox" id="sound-enabled"><span
                                class="slider round"></span></label>
                    </div>
                    <div class="setting-item">
                        <label for="show-chat-bubbles-think">指令气泡内显示思考链路</label>
                        <label class="switch"><input type="checkbox" id="show-chat-bubbles-think" checked><span
                                class="slider round"></span></label>
                    </div>
                    <div class="setting-item">
                        <label for="show-log-bubbles-think">数据流中显示详细思考链路</label>
                        <label class="switch"><input type="checkbox" id="show-log-bubbles-think" checked><span
                                class="slider round"></span></label>
                    </div>
                </div>
                <div class="setting-group">
                    <h3><i class="fas fa-cogs"></i> Agent 行为核心</h3>
                    <div class="setting-item">
                        <label for="auto-submit-quick-actions">快速指令自动传输</label>
                        <label class="switch"><input type="checkbox" id="auto-submit-quick-actions" checked><span
                                class="slider round"></span></label>
                    </div>
                    <div class="setting-item">
                        <label for="component-visibility-toggle">AI核心视效初始状态</label>
                        <label class="switch"><input type="checkbox" id="component-visibility-toggle" checked><span
                                class.="slider round"></span></label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="reset-settings" class="secondary-btn"><i class="fas fa-undo-alt"></i>恢复出厂协议</button>
                <button id="save-settings" class="primary-btn"><i class="fas fa-save"></i> 同步并固化参数</button>
            </div>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>

</html>